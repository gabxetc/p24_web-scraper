<!-- HTML Entities: https://www.freeformatter.com/html-entities.html#ascii-characters -->

<!-- Just declares that it is HTML | TO get the boilerplate type ! tab-->
<!DOCTYPE html>

<!-- This tag tells the code that everything in the html tag is html -->
<html lang="en">
  <!-- The head tag is where we load CSS and Javascript files. It contains info about the website -->
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Other meta functions include keywords which are topics associated with the web page -->
    <!-- and description which is the description you see when you search a site -->
    <title>Property 24 WebScraper</title>
    <link rel="stylesheet" href="/css/stylesheet.css">
  </head>
  <!-- This is the main content of the webpage. Everything we see on the page will usually be in the body tag -->
  <body>
    <header>
      <h1>Welcome to my page!</h1>
    </header>
    <div class="info">
      <br>
      <div class="greeting">
        <h1>Instructions</h1>
        <p>How to use the software.</p>
      </div>
      <br>
      <ol><p>Step 1:</p>
        <li>In VS Code, open the terminal.</li>
        <li>Run the following command: node index.js in the terminal to run the server.</li>
        <li>Once your server is running. Go to base.html, right click anywhere on the script and "Open with live server".</li>
        <p>OR</p>
        <li>Go into file explorer and open base.html with Google Chrome by right clicking on it and saying "Open with".</li>
        <li>By now your server should be live and you should have a webpage open with a property 24 logo on it.</li>
      </ol>
      <br>
      <ol><p>Step 2:</p>
        <li>In a new tab, google property 24 and go onto Property24's website.</li>
        <li>In the search bar of the Property 24's website, enter the location/area you would like to have scrapped for information.</li>
        <li>Click on the search icon once you are satisfied with the area you would like scraped</li>
        <li>Once the webpage has loaded with the area of interest. Copy the url of the webpage with the filtered data i.e. location</li>
      </ol>
      <br>
      <ol><p>Step 3:</p>
        <li>Go onto the base.html's website that you previously opened through VS Code or file explorer.</li>
        <li>Admire Gaby's hard work</li>
        <li>Enter your name in the text box</li>
        <li>Paste the url you copied from Propetry 24's website into the text box that says "Link"</li>
        <li>Press submit</li>
        <li>Watch the scrapping commense and enjoy!</li>
      </ol>
    </div>
    <div class = "center">
    <a
      href="https://www.property24.com/to-rent?gad_source=1&gclid=CjwKCAjwvKi4BhABEiwAH2gcw-ahW4yLv_3qZ9NfQYEKfuyz9l1n7u2FrdUn7-bs2XdbkN0MVeShoxoCAr4QAvD_BwE"
      target="”_blank”"
      >Go to the Property 24 website to generate a link</a
    >
    <br>
    <img src="/images/p24.png" alt="An image of Property 24 logo" />
    <br>
    <p>1. Insert your name so I know who you are!</p>
    <p>2. Insert a link to begin web scraping</p>
    <!-- <p>3. Choose how you's like to filter your data. Ascending order, descending order or noraml.</p> -->
    <!-- <form id="sortForm" action="/sort" method="post">
      <br>
      <label for="sort">Sort price by:</label><br>
      <input type="radio" id="ascending" name="sort" class="sort" value="ascending" required>
      <label for="ascending">Ascending</label><br>
      <input type="radio" id="descending" name="sort" class="sort" value="descending" required>
      <label for="descending">Descending</label><br>
      <input type="radio" id="normal" name="sort" class="sort" value="normal" required>
      <label for="normal">Normal</label><br><br>
      <tr>
    </form> -->
    <form id="form" action="/scrape" method="post">
      <table>
        <tr>
          <td>Name:</td>
          <td><input type="text" link="" id="name" required/></td>
          </td>
        </tr>
        <tr>
          <td>Link:</td>
          <td><input type="text" value="" id="p24_link" name="url" required/></td>
        </tr>
          <td><input type="submit" value="Submit"></td>
        </tr>
      </table>
    </form>
    </div>
    <script>
      const form = document.getElementById('form');
      const firstName = document.getElementById('name');
      const p24_link = document.getElementById('p24_link');
      
      form.addEventListener('submit', function(e) {
        e.preventDefault();

        const username = firstName.value;
        const onlyLink = p24_link.value;

        localStorage.setItem('name', username);
        localStorage.setItem('p24_link', onlyLink);

        window.location.href = "next.html";
      })
      document.getElementById("form").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent form refresh
            
            // Get the input value
            const p24Link = document.getElementById("p24_link").value;

            // Send the p24Link to the server
            fetch('http://localhost:8000/scrape', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ url: p24Link }),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Scraped Data:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
          });

      //   document.getElementById("sortForm").addEventListener("submit", function(event) {
      //     event.preventDefault();
      //     const sortOption = document.querySelector('input[name="sort"]:checked').value;
      //   // Send the sort option to the server
      //   fetch('http://localhost:8000/sort', {
      //       method: 'POST',
      //       headers: {
      //           'Content-Type': 'application/json',
      //       },
      //       body: JSON.stringify({ sortValue: sortOption }),
      //   })
      //   .then(response => response.json())
      //   .then(data => {
      //       console.log('Sorted Data:', data);
      //   })
      //   .catch(error => {
      //       console.error('Error:', error);
      //   });
      // });
      
    </script>
    <footer>
      <a href="www.linktr.ee/tiafu" style="color: white;">View my portfolio</a>
    </footer>
  </body>
</html>
